let numDice=0,balance=0,numRoundsPlayed=0,totalPointsWon=0;const form=document.querySelector("form"),numDiceInput=document.querySelector("#num-dice-input"),numDiceError=document.querySelector("#num-dice-error"),playAgainButton=document.querySelector("#play-again-button"),endGameButton=document.querySelector("#end-game-button"),roundResult=document.querySelector("#round-result"),balanceDisplay=document.querySelector("#balance-display"),numRoundsPlayedDisplay=document.querySelector("#num-rounds-played"),finalBalanceDisplay=document.querySelector("#final-balance"),avgPointsPerRoundDisplay=document.querySelector("#avg-points-per-round"),endStage=document.querySelector("#end-stage");function playRound(){numRoundsPlayed++;var n=[];let e=0;for(let e=0;e<numDice;e++)n.push(Math.floor(6*Math.random())+1);n.sort(),e=n[0]===n[numDice-1]?60+n.reduce((e,n)=>e+n,0):n[0]===n[numDice-2]||n[1]===n[numDice-1]?40+n.reduce((e,n)=>e+n,0):n[0]===n[1]&&n[1]===n[2]&&n[2]+1===n[3]||n[1]===n[2]&&n[2]===n[3]&&n[0]+1===n[1]?20+n.reduce((e,n)=>e+n,0):n.reduce((e,n)=>e+n,0),roundResult.textContent=`Round ${numRoundsPlayed}: You rolled ${numDice} dice and scored ${e} points! Dice values: `+n.join(", "),balance+=e,balanceDisplay.textContent=`Current Balance: ${balance} points`;let t=document.createElement("div");var a=document.createElement("p"),o=(a.textContent="Do you want to continue with another round or end the game?",document.createElement("button")),u=(o.textContent="Continue",document.createElement("button"));u.textContent="End Game",t.appendChild(a),t.appendChild(o),t.appendChild(u),form.appendChild(t),o.addEventListener("click",()=>{form.removeChild(t),playRound()}),u.addEventListener("click",()=>{form.removeChild(t),endGame()})}function endGame(){var e=(balance/numRoundsPlayed).toFixed(1);roundResult.textContent=`End of game: You played ${numRoundsPlayed} rounds and scored ${balance} points. Average points per round: `+e,balanceDisplay.style.display="none";const n=document.createElement("div");var e=document.createElement("button"),t=document.createElement("button");e.textContent="Play again",e.addEventListener("click",()=>{n.style.display="none",playRound()}),t.textContent="End game",t.addEventListener("click",()=>{n.style.display="none",finalResults()}),n.appendChild(e),n.appendChild(t),n.style.display="flex",n.style.justifyContent="center",n.style.marginTop="20px",gameContainer.appendChild(n)}numDiceInput.addEventListener("input",()=>{numDiceInput.checkValidity()?numDiceError.textContent="":numDiceError.textContent="Please enter a number between 3 and 6."}),playAgainButton.addEventListener("click",playRound),endGameButton.addEventListener("click",endGame),form.addEventListener("submit",e=>{e.preventDefault(),numDiceInput.checkValidity()?(numDice=parseInt(numDiceInput.value),playRound()):numDiceError.textContent="Please enter a number between 3 and 6."});
